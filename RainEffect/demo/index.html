<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <title>Rain Effect Experiments | Demo 1 | Codrops</title>
	<meta name="description" content="Some WebGL experiments with raindrop effects" />
	<meta name="keywords" content="webgl, raindrops, effect, rain, web, video, background" />
	<meta name="author" content="Lucas Bebber for Codrops" />
	<link rel="shortcut icon" href="favicon.ico"> -->
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700,500,900' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/demo.css" />
	<link rel="stylesheet" type="text/css" href="css/style1.css" />
	<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]--> 
</head>

<body class="demo-1">
	<div class="image-preload">
		<img src="img/drop-color.png" alt="">
		<img src="img/drop-alpha.png" alt="">
		<img src="img/weather/texture-rain-fg.png" />
		<img src="img/weather/texture-rain-bg.png" />
		<img src="img/weather/texture-sun-fg.png" />
		<img src="img/weather/texture-sun-bg.png" />
		<img src="img/weather/texture-fallout-fg.png" />
		<img src="img/weather/texture-fallout-bg.png" />
		<img src="img/weather/texture-drizzle-fg.png" />
		<img src="img/weather/texture-drizzle-bg.png" />
	</div>
	<div class="container">
		<!-- <header class="codrops-header">
			<div class="codrops-links">
				<a class="codrops-icon codrops-icon--prev" href="http://tympanus.net/Development/CardStackEffects/" title="Previous Demo"><span>Previous Demo</span></a>
				<a class="codrops-icon codrops-icon--drop" href="http://tympanus.net/codrops/?p=25417" title="Back to the article"><span>Back to the Codrops article</span></a>
			</div>
			<h1>Rain &amp; Water Effects</h1>
			<nav class="codrops-demos">
				<a class="current-demo" href="index.html">Weather</a>
				<a href="index2.html">Water</a>
				<a href="index3.html">Video</a>
			</nav>
		</header> -->
		<div class="slideshow">
			<canvas width="1" height="1" id="container" style="position:absolute"></canvas>
			<!-- Heavy Rain -->
			<div class="slide" id="slide-1" data-weather="rain">
				<div class="slide__element slide__element--date" id="weekAndMonth-0">Sunday, 24<sup>th</sup> of October 1949</div>
				<div class="slide__element slide__element--temp" id="Temperature-0">12°<small>C</small></div>
			</div>
			<!-- Drizzle -->
			<div class="slide" id="slide-2" data-weather="drizzle">
				<div class="slide__element slide__element--date" id="weekAndMonth-1">Saturday, 25<sup>th</sup> of October 1949</div>
				<div class="slide__element slide__element--temp" id="Temperature-1">18°<small>C</small></div>
			</div>
			<!-- Sunny -->
			<div class="slide" id="slide-3" data-weather="sunny">
				<div class="slide__element slide__element--date" id="weekAndMonth-2">Monday, 26<sup>th</sup> of October 1949</div>
				<div class="slide__element slide__element--temp" id="Temperature-2">25°<small>C</small></div>
			</div>
			<!-- Heavy rain -->
			<div class="slide" id="slide-5" data-weather="storm">
				<div class="slide__element slide__element--date" id="weekAndMonth-3">Wednesday, 28<sup>th</sup> of October 1949</div>
				<div class="slide__element slide__element--temp" id="Temperature-3">20°<small>C</small></div>
			</div>
			<!-- Fallout (greenish overlay with slightly greenish/yellowish drops) -->
			<div class="slide" id="slide-4" data-weather="fallout">
				<div class="slide__element slide__element--date" id="weekAndMonth-4">Tuesday, 27<sup>th</sup> of October 1949</div>
				<div class="slide__element slide__element--temp" id="Temperature-4">34°<small>C</small></div>
			</div>
			<nav class="slideshow__nav">
				<a class="nav-item" href="#slide-1"><i class="icon icon--rainy"></i><span id="date-0">10/24</span></a>
				<a class="nav-item" href="#slide-2"><i class="icon icon--drizzle"></i><span id="date-1">10/25</span></a>
				<a class="nav-item" href="#slide-3"><i class="icon icon--sun"></i><span id="date-2">10/26</span></a>
				<a class="nav-item" href="#slide-5"><i class="icon icon--storm"></i><span id="date-3">10/28</span></a>
				<a class="nav-item" href="#slide-4"><i class="icon icon--radioactive"></i><span id="date-4">10/27</span></a>
			</nav>
		</div>
		<p class="nosupport">Sorry, but your browser does not support WebGL!</p>
	</div>
	<!-- /container -->
	<script src="js/index.min.js"></script>

	<script type="text/javascript" src="../../js/jquery.min.js"></script>
	<script type="text/javascript" src="js/helper.js"></script>
	<script type="text/javascript">  
	// 获取城市  
	var cityUrl = 'http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js';  
        $.getScript(  	
            cityUrl,  
            function() {  
                var city = remote_ip_info.city; // 获取城市  
                $.ajax({  
                    url: 'http://api.map.baidu.com/telematics/v3/weather?location=' + city +'&output=json&ak=KPGX6sBfBZvz8NlDN5mXDNBF&callback=',
                    type: "post",  
                    dataType: "jsonp",  
                    scriptCharset: "gbk",  
                    success: function(baiduTQ) {  
                        try {  
                            if (baiduTQ == null || baiduTQ.error != 0 || baiduTQ.status != "success" || baiduTQ.results.count == 0) {  
                                return;  
                            }  
                            if (baiduTQ.results[0].weather_data.length > 0) {  
								var weather_data = baiduTQ.results[0].weather_data;

								var strDate = baiduTQ.date;  
								var dateSplit=strDate.split("-");								
								var day = parseInt(dateSplit[2]);
								var month = parseInt(dateSplit[1]);
								var year = parseInt(dateSplit[0]);
								var dayMax = 30;
								for(var i=0;i<5;i++)
								{					
									switch(month)
									{
										case 2:
											if(year % 4 == 0)
												dayMax = 29;
											else
												dayMax = 28;
										case 1:
										case 3:
										case 5:
										case 7:
										case 8:
										case 10:
										case 12:
											dayMax = 31;
											break;
										case 4:
										case 6:case 9: case 11:
											dayMax = 30;
											break;
									}
									if(day > dayMax)
									{
										day = 1;
										if(month>12)
										{
											month = 1;
											year += 1;
										}
										else
											month += 1;
									}
									document.getElementById("date-" + i).innerHTML = month + "/" + day;

									if(i == 0)
									{
										var split = weather_data[i].date.split(" "); 
										document.getElementById("weekAndMonth-" + i).innerHTML = getWeek(split[0]) + ", " + day + "<sup>th</sup> of " + getMonth(month) + " " + year;
										split = weather_data[i].date.split("：");
										var curTemp = split.pop();  
										//alert(curTemp);
										document.getElementById("Temperature-" + i).innerHTML = curTemp.slice(0, -2) + "°<small>C</small>";
									}
									else if(weather_data[i] != null)
									{
										document.getElementById("weekAndMonth-" + i).innerHTML = getWeek(weather_data[i].date) + ", " + day + "<sup>th</sup> of " + getMonth(month) + " " + year;
										var curTemp = weather_data[i].temperature.split(" "); 
										//alert(curTemp);
										document.getElementById("Temperature-" + i).innerHTML = curTemp[0] + "<small>~ " + curTemp[2].slice(0,-1) + "°C</small>";
									}

									day += 1;
								}
                            }  
                        } catch (err) {  
                            alert(err)  
                        }  
                    }  
                });  
			});  	
			
	</script> 	
	
</body>

</html>
