var M_Event={_listeners:{},addEvent:function(b,a){if(typeof this._listeners[b]==="undefined"){this._listeners[b]=[]}if(typeof a==="function"){this._listeners[b].push(a)}return this},fireEvent:function(c){var b=this._listeners[c];if(b instanceof Array){for(var a=0,d=b.length;a<d;a+=1){if(typeof b[a]==="function"){b[a]({type:c})}}}return this},removeEvent:function(d,c){var b=this._listeners[d];if(typeof d==="string"&&b instanceof Array){if(typeof c==="function"){for(var a=0,e=b.length;a<e;a+=1){if(b[a]===c){this._listeners[d].splice(a,1);break}}}else{delete this._listeners[d]}}return this}};function getTQBegin(){var b="https://restapi.amap.com/v3/ip?output=json&key=761d856bd2714d9d486c9dfb3dcd796c";var a="北京";var c="110101";$.getJSON(b,function(d){if(d.status!="1"||d.info!="OK"){return}a=d.city;c=d.adcode;$.getJSON("https://restapi.amap.com/v3/weather/weatherInfo?city="+a+"&key=761d856bd2714d9d486c9dfb3dcd796c",function(n){try{if(n==null||n.info!="OK"||n.status!="1"||n.lives.count==0){return}var f=n.lives[0];var j=f.reporttime;var e=j.split(" ");var g=e[1];e=e[0].split("-");var l=e[2];var i=e[1];var k=e[0];document.getElementById("Temperature-0").innerHTML=f.temperature+"°<small>C</small>";var m=getWeather(f.weather);document.getElementById("slide-0").getAttributeNode("data-weather").value=m;document.getElementById("item-0").className=getWeatherCss(m);M_Event.fireEvent("updateWeather")}catch(h){alert(h)}$.getJSON("https://restapi.amap.com/v3/weather/weatherInfo?city="+a+"&extensions=all&key=761d856bd2714d9d486c9dfb3dcd796c",function(x){try{if(x==null||x.info!="OK"||x.status!="1"||x.forecasts.count==0){return}if(x.forecasts[0].casts.length>0){var o=x.forecasts[0].casts;for(var r=0;r<o.length;r++){var v=o[r].date;var p=v.split("-");var u=p[2];var s=p[1];var t=p[0];document.getElementById("date-"+r).innerHTML=s+"/"+u;if(r==0){document.getElementById("weekAndMonth-"+r).innerHTML=getWeek(o[r].week)+", "+u+"<sup>th</sup> of "+getMonth(s)+" "+t}else{if(o[r]!=null){var w=getWeather(o[r].nightweather);document.getElementById("weekAndMonth-"+r).innerHTML=getWeek(o[r].week)+", "+u+"<sup>th</sup> of "+getMonth(s)+" "+t;document.getElementById("Temperature-"+r).innerHTML=o[r].daytemp+"<small>~ "+o[r].nighttemp+"°C</small>";document.getElementById("slide-"+r).getAttributeNode("data-weather").value=w;document.getElementById("item-"+r).className=getWeatherCss(w)}}}}}catch(q){alert(q)}})})})}function getWeek(a){switch(a){case"1":return"Monday";break;case"2":return"Tuesday";break;case"3":return"Wednesday";break;case"4":return"Thursday";break;case"5":return"Friday";break;case"6":return"Saturday";break;case"7":return"Sunday";break;default:return"Monday";break}}function getMonth(a){switch(a){case"01":return"January";break;case"02":return"February";break;case"03":return"March";break;case"04":return"April";break;case"05":return"May";break;case"06":return"June";break;case"07":return"July";break;case"08":return"August";break;case"09":return"September";break;case"10":return"October";break;case"11":return"November";break;case"12":return"December";break;default:return"December";break}}function getWeatherCss(a){switch(a){case"sunny":return"wi wi-day-sunny wi-big";break;case"drizzle":return"wi wi-day-sprinkle wi-big";break;case"rain":return"wi wi-day-rain-wind wi-big";break;case"storm":return"wi wi-day-storm-showers wi-big";break;case"fallout":return"wi wi-day-fog wi-big";break;default:return"wi wi-day-sprinkle wi-big";break}}function getWeather(a){switch(a){case"晴":case"多云":return"sunny";break;case"阴":break;case"小雨":case"小雨-中雨":return"drizzle";break;case"中雨":case"大雨":case"冻雨":case"雨夹雪":return"rain";break;case"暴雨":case"大暴雨":case"特大暴雨":case"中雨-大雨":case"大雨-暴雨":case"暴雨-大暴雨":case"大暴雨-特大暴雨":case"阵雨":case"雷阵雨":case"雷阵雨并伴有冰雹":return"storm";break;case"阵雪":case"小雪":case"中雪":case"大雪":case"暴雪":case"小雪-中雪":case"中雪-大雪":case"大雪-暴雪":return"fallout";break;case"雾":break;case"轻雾":break;case"霾":return"fallout";break;case"沙尘暴":case"浮尘":case"扬沙":case"强沙尘暴":case"飑":case"龙卷风":case"弱高吹雪":return"fallout";break;default:return"drizzle";break}};